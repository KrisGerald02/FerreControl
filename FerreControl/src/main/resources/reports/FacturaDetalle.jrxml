<?xml version="1.0" encoding="UTF-8"?>

<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components"
              xsi:schemaLocation="
                http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd
                http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd"
              name="FacturaDetalle" language="java"
              pageWidth="595" pageHeight="842" columnWidth="555"
              leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">

    <!-- Parámetros -->
    <parameter name="numeroFactura"    class="java.lang.String"/>
    <parameter name="fecha"            class="java.util.Date"/>
    <parameter name="clienteNombre"    class="java.lang.String"/>
    <parameter name="clienteCedula"    class="java.lang.String"/>
    <parameter name="clienteDireccion" class="java.lang.String"/>
    <parameter name="clienteTelefono"  class="java.lang.String"/>
    <parameter name="metodoPago"       class="java.lang.String"/>

    <parameter name="subtotal"         class="java.math.BigDecimal"/>
    <parameter name="iva"              class="java.math.BigDecimal"/>
    <parameter name="total"            class="java.math.BigDecimal"/>

    <!-- Campos del detalle -->
    <field name="productoNombre" class="java.lang.String"/>
    <field name="cantidad"       class="java.math.BigDecimal"/>
    <field name="precio"         class="java.math.BigDecimal"/>
    <field name="importe"        class="java.math.BigDecimal"/>

    <background>
        <band/>
    </background>

    <!-- ENCABEZADO -->
    <title>
        <band height="235">

            <!-- Fondo superior -->
            <rectangle>
                <reportElement x="0" y="0" width="555" height="90"
                               backcolor="#F5F5F5" mode="Opaque"/>
            </rectangle>

            <!-- Logo -->
            <image>
                <reportElement x="20" y="15" width="60" height="60"/>
                <imageExpression class="java.lang.String"><![CDATA["C:/Users/intim/Downloads/logo_ferreteria.jpg"]]></imageExpression>
            </image>

            <!-- Nombre ferretería -->
            <staticText>
                <reportElement x="100" y="25" width="260" height="24"/>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font size="18" isBold="true"/>
                </textElement>
                <text><![CDATA[Ferretería Vanessa]]></text>
            </staticText>

            <!-- Subtítulo -->
            <staticText>
                <reportElement x="100" y="49" width="260" height="18"/>
                <textElement textAlignment="Left">
                    <font size="11" isItalic="true"/>
                </textElement>
                <text><![CDATA[Factura por su compra]]></text>
            </staticText>

            <!-- Número de factura -->
            <staticText>
                <reportElement x="0" y="95" width="140" height="14"/>
                <textElement>
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Número de factura:]]></text>
            </staticText>
            <textField>
                <reportElement x="140" y="95" width="180" height="14"/>
                <textElement>
                    <font size="9"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{numeroFactura}]]></textFieldExpression>
            </textField>

            <!-- Para / Fecha -->
            <staticText>
                <reportElement x="0" y="115" width="80" height="14"/>
                <textElement>
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Para:]]></text>
            </staticText>
            <textField>
                <reportElement x="80" y="115" width="280" height="14"/>
                <textElement>
                    <font size="9"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{clienteNombre} + " (" + $P{clienteCedula} + ")"]]></textFieldExpression>
            </textField>

            <staticText>
                <reportElement x="370" y="115" width="50" height="14"/>
                <textElement textAlignment="Right">
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Fecha:]]></text>
            </staticText>
            <textField pattern="dd/MM/yyyy">
                <reportElement x="425" y="115" width="110" height="14"/>
                <textElement>
                    <font size="9"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{fecha}]]></textFieldExpression>
            </textField>

            <!-- Dirección -->
            <staticText>
                <reportElement x="0" y="133" width="80" height="14"/>
                <textElement>
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Dirección:]]></text>
            </staticText>
            <textField isStretchWithOverflow="true">
                <reportElement x="80" y="133" width="455" height="14"/>
                <textElement>
                    <font size="9"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{clienteDireccion}]]></textFieldExpression>
            </textField>

            <!-- Teléfono -->
            <staticText>
                <reportElement x="0" y="151" width="80" height="14"/>
                <textElement>
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Teléfono:]]></text>
            </staticText>
            <textField>
                <reportElement x="80" y="151" width="200" height="14"/>
                <textElement>
                    <font size="9"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{clienteTelefono}]]></textFieldExpression>
            </textField>

            <!-- Método de pago -->
            <staticText>
                <reportElement x="0" y="169" width="100" height="14"/>
                <textElement>
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Método de pago:]]></text>
            </staticText>
            <textField>
                <reportElement x="100" y="169" width="200" height="14"/>
                <textElement>
                    <font size="9"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{metodoPago}]]></textFieldExpression>
            </textField>

            <!-- Línea separadora -->
            <line>
                <reportElement x="0" y="190" width="555" height="1" forecolor="#CCCCCC"/>
            </line>

            <!-- Cabecera de columnas -->
            <staticText>
                <reportElement x="0" y="200" width="315" height="15"/>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Descripción]]></text>
            </staticText>

            <staticText>
                <reportElement x="315" y="200" width="60" height="15"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Cant.]]></text>
            </staticText>

            <staticText>
                <reportElement x="375" y="200" width="80" height="15"/>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Precio]]></text>
            </staticText>

            <staticText>
                <reportElement x="455" y="200" width="100" height="15"/>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Monto]]></text>
            </staticText>

        </band>
    </title>

    <!-- DETALLE -->
    <detail>
        <band height="18">

            <line>
                <reportElement x="0" y="17" width="555" height="1" forecolor="#EEEEEE"/>
            </line>

            <textField>
                <reportElement x="0" y="2" width="315" height="14"/>
                <textElement verticalAlignment="Middle">
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{productoNombre}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="315" y="2" width="60" height="14"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{cantidad}]]></textFieldExpression>
            </textField>

            <textField pattern="C$ #,##0.00">
                <reportElement x="375" y="2" width="80" height="14"/>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{precio}]]></textFieldExpression>
            </textField>

            <textField pattern="C$ #,##0.00">
                <reportElement x="455" y="2" width="100" height="14"/>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{importe}]]></textFieldExpression>
            </textField>

        </band>
    </detail>

    <!-- RESUMEN: SUBTOTAL, IVA, TOTAL -->
    <summary>
        <band height="80">

            <line>
                <reportElement x="0" y="0" width="555" height="1" forecolor="#CCCCCC"/>
            </line>

            <!-- Mensaje -->
            <staticText>
                <reportElement x="0" y="10" width="300" height="15"/>
                <textElement>
                    <font size="9" isItalic="true"/>
                </textElement>
                <text><![CDATA[Gracias por su compra. ¡Vuelva pronto!]]></text>
            </staticText>

            <!-- Tabla de totales -->
            <!-- Subtotal -->
            <staticText>
                <reportElement x="345" y="10" width="110" height="15"/>
                <textElement textAlignment="Right">
                    <font size="9"/>
                </textElement>
                <text><![CDATA[Subtotal:]]></text>
            </staticText>
            <textField pattern="C$ #,##0.00">
                <reportElement x="455" y="10" width="100" height="15"/>
                <textElement textAlignment="Right">
                    <font size="9"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{subtotal}]]></textFieldExpression>
            </textField>

            <!-- IVA -->
            <staticText>
                <reportElement x="345" y="27" width="110" height="15"/>
                <textElement textAlignment="Right">
                    <font size="9"/>
                </textElement>
                <text><![CDATA[IVA (15%):]]></text>
            </staticText>
            <textField pattern="C$ #,##0.00">
                <reportElement x="455" y="27" width="100" height="15"/>
                <textElement textAlignment="Right">
                    <font size="9"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{iva}]]></textFieldExpression>
            </textField>

            <!-- Total -->
            <staticText>
                <reportElement x="345" y="47" width="110" height="18"/>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font size="10" isBold="true"/>
                </textElement>
                <text><![CDATA[Monto total:]]></text>
            </staticText>
            <textField pattern="C$ #,##0.00">
                <reportElement x="455" y="47" width="100" height="18"/>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font size="10" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{total}]]></textFieldExpression>
            </textField>

        </band>
    </summary>

</jasperReport>