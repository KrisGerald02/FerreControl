<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE jasperReport PUBLIC "-//JasperReports//DTD Report Design//EN"
        "http://jasperreports.sourceforge.net/dtds/jasperreport.dtd">

<jasperReport name="ProductosListado" language="java"
              pageWidth="842" pageHeight="595" columnWidth="802"
              leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">

    <style name="StockStyle">
        <conditionalStyle>
            <conditionExpression><![CDATA[$F{stock}.intValue() < $F{stockMinimo}.intValue()]]></conditionExpression>
            <style forecolor="#FF0000" isBold="true"/>
        </conditionalStyle>
    </style>

    <!-- Campos (propiedades de Producto) -->
    <field name="nombre"              class="java.lang.String"/>
    <field name="categoriaNombre"     class="java.lang.String"/>
    <field name="marca"               class="java.lang.String"/>
    <field name="unidadMedidaTexto"   class="java.lang.String"/>
    <field name="stock"               class="java.lang.Integer"/>
    <field name="stockMinimo"         class="java.lang.Integer"/>
    <field name="stockMaximo"         class="java.lang.Integer"/>
    <field name="precioVenta"         class="java.lang.Double"/>
    <field name="estadoStockTexto"    class="java.lang.String"/>

    <background>
        <band/>
    </background>

    <!-- Título -->
    <title>
        <band height="140">

            <rectangle>
                <reportElement x="0" y="0" width="802" height="95"
                               backcolor="#EEEEEE" mode="Opaque"/>
            </rectangle>

            <!-- Logo -->
            <image>
                <reportElement x="20" y="10" width="60" height="60"/>
                <imageExpression class="java.lang.String"><![CDATA["C:/Users/intim/Downloads/logo_ferreteria.jpg"]]></imageExpression>
            </image>

            <!-- Nombre ferretería -->
            <staticText>
                <reportElement x="100" y="18" width="550" height="24"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="18" isBold="true"/>
                </textElement>
                <text><![CDATA[Ferretería Vanessa]]></text>
            </staticText>

            <!-- Subtítulo -->
            <staticText>
                <reportElement x="100" y="42" width="550" height="18"/>
                <textElement textAlignment="Center">
                    <font size="12" isItalic="true"/>
                </textElement>
                <text><![CDATA[Listado general de productos]]></text>
            </staticText>

            <!-- Ubicación -->
            <staticText>
                <reportElement x="100" y="64" width="80" height="12"/>
                <textElement>
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Ubicación:]]></text>
            </staticText>
            <staticText>
                <reportElement x="180" y="64" width="420" height="12"/>
                <textElement>
                    <font size="8"/>
                </textElement>
                <text><![CDATA[La Dalia, Matagalpa (De la Alcaldía de la Dalia media cuadra arriba)]]></text>
            </staticText>

            <!-- Teléfono -->
            <staticText>
                <reportElement x="100" y="78" width="80" height="12"/>
                <textElement>
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Teléfono:]]></text>
            </staticText>
            <staticText>
                <reportElement x="180" y="78" width="160" height="12"/>
                <textElement>
                    <font size="9"/>
                </textElement>
                <text><![CDATA[+505 8624 4743]]></text>
            </staticText>

            <!-- Fecha -->
            <staticText>
                <reportElement x="620" y="72" width="80" height="15"/>
                <textElement textAlignment="Right">
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Fecha:]]></text>
            </staticText>
            <textField pattern="dd/MM/yyyy">
                <reportElement x="705" y="72" width="80" height="15"/>
                <textElement textAlignment="Left">
                    <font size="9"/>
                </textElement>
                <textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
            </textField>

            <line>
                <reportElement x="0" y="105" width="802" height="1" forecolor="#999999"/>
            </line>

        </band>
    </title>

    <!-- Encabezado columnas (ya sin ID) -->
    <columnHeader>
        <band height="25">
            <rectangle>
                <reportElement x="0" y="0" width="802" height="25"
                               backcolor="#F5F5F5" mode="Opaque"/>
            </rectangle>

            <!-- Nombre -->
            <staticText>
                <reportElement x="0" y="5" width="230" height="15"/>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Nombre]]></text>
            </staticText>

            <!-- Categoría -->
            <staticText>
                <reportElement x="230" y="5" width="140" height="15"/>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Categoría]]></text>
            </staticText>

            <!-- Marca -->
            <staticText>
                <reportElement x="370" y="5" width="110" height="15"/>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Marca]]></text>
            </staticText>

            <!-- Unidad -->
            <staticText>
                <reportElement x="480" y="5" width="60" height="15"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Unidad]]></text>
            </staticText>

            <!-- Stock -->
            <staticText>
                <reportElement x="540" y="5" width="50" height="15"/>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Stock]]></text>
            </staticText>

            <!-- Min -->
            <staticText>
                <reportElement x="590" y="5" width="45" height="15"/>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Min]]></text>
            </staticText>

            <!-- Máx -->
            <staticText>
                <reportElement x="635" y="5" width="45" height="15"/>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Máx]]></text>
            </staticText>

            <!-- Precio -->
            <staticText>
                <reportElement x="680" y="5" width="70" height="15"/>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Precio]]></text>
            </staticText>

            <!-- Estado -->
            <staticText>
                <reportElement x="750" y="5" width="52" height="15"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Estado]]></text>
            </staticText>
        </band>
    </columnHeader>

    <!-- Detalle -->
    <detail>
        <band height="18">
            <line>
                <reportElement x="0" y="17" width="802" height="1" forecolor="#DDDDDD"/>
            </line>

            <!-- Nombre -->
            <textField>
                <reportElement x="0" y="2" width="230" height="14"/>
                <textElement verticalAlignment="Middle">
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{nombre}]]></textFieldExpression>
            </textField>

            <!-- Categoría -->
            <textField>
                <reportElement x="230" y="2" width="140" height="14"/>
                <textElement verticalAlignment="Middle">
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{categoriaNombre}]]></textFieldExpression>
            </textField>

            <!-- Marca -->
            <textField>
                <reportElement x="370" y="2" width="110" height="14"/>
                <textElement verticalAlignment="Middle">
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{marca}]]></textFieldExpression>
            </textField>

            <!-- Unidad -->
            <textField>
                <reportElement x="480" y="2" width="60" height="14"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{unidadMedidaTexto}]]></textFieldExpression>
            </textField>

            <!-- Stock -->
            <textField>
                <reportElement x="540" y="2" width="50" height="14" style="StockStyle"/>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{stock}]]></textFieldExpression>
            </textField>

            <!-- Min -->
            <textField>
                <reportElement x="590" y="2" width="45" height="14"/>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{stockMinimo}]]></textFieldExpression>
            </textField>

            <!-- Máx -->
            <textField>
                <reportElement x="635" y="2" width="45" height="14"/>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{stockMaximo}]]></textFieldExpression>
            </textField>

            <!-- Precio -->
            <textField pattern="C$ #,##0.00">
                <reportElement x="680" y="2" width="70" height="14"/>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{precioVenta}]]></textFieldExpression>
            </textField>

            <!-- Estado -->
            <textField>
                <reportElement x="750" y="2" width="52" height="14"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{estadoStockTexto}]]></textFieldExpression>
            </textField>
        </band>
    </detail>

    <!-- Pie -->
    <pageFooter>
        <band height="25">
            <line>
                <reportElement x="0" y="0" width="802" height="1" forecolor="#999999"/>
            </line>

            <staticText>
                <reportElement x="0" y="5" width="450" height="15"/>
                <textElement>
                    <font size="9" isItalic="true"/>
                </textElement>
                <text><![CDATA[Reporte de listado general de productos – FerreControl]]></text>
            </staticText>

            <textField>
                <reportElement x="600" y="5" width="202" height="15"/>
                <textElement textAlignment="Right">
                    <font size="9"/>
                </textElement>
                <textFieldExpression><![CDATA["Página " + $V{PAGE_NUMBER} + " de 1"]]></textFieldExpression>
            </textField>
        </band>
    </pageFooter>

</jasperReport>
